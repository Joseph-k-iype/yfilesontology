/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.6.0.3.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2024 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from"./core.js";import l from"./lang.js";import _a_ from"./algorithms.js";import _b_ from"./layout-core.js";import _c_ from"./layout-hierarchic.js";import _d_ from"./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($,f,n,t){"use strict";function r(f){var n=new $.C.GGD,t=n.$XwI;t.$YTI=new $.C.DHD.$t(0,!1),t.$oFI=60,t.$cEI=20;var r=n.$dwI;switch(f.$f7){case-1:r.$adI=0;break;case 0:r.$adI=.5;break;case 1:r.$adI=1}return n}function e($,f,n){for(var t=0,r=0,e=f.$eKI();e.$kU;e.$TZ()){var i=e.$wV;1===n.$ea(i)?i.$f7>0&&r++:t+=i.$f6}return r<=1&&2===t}function i(f,n,t){var r=n.$faJ($.O.$p56);f.$f16=n.$pNJ(),f.$f17=n.$pNJ(),f.$f3=n.$pNJ(),f.$f4=n.$pNJ(),f.$f12 instanceof $.C.GGD&&0!==f.$f20&&(f.$f=f.$f12.$MnJ(n)),function(f,n,t){f.$f5=$.HF.$m14(n.$eG),f.$f1=new $.LE;var r=new $.LE;f.$f11=new $.C.RKB.$s,f.$f2=n.$qNJ(),f.$f15=n.$qNJ(),f.$f6=n.$qNJ(),f.$f9=n.$qNJ(),f.$f8=n.$qNJ(),f.$f19=new $.SE;for(var e=n.$sOJ();e.$kU;e.$TZ()){var i=new $.C.RKB.$s,s=e.$wV;f.$f2.$Hg(s,"n"+s.$er),1===n.$faJ($.O.$p56).$ea(s)?a(f,s,i):l(f,s,i);var u=new $.LE;u.$m(i),o(f,i,u);for(var J=0;J<u.$lN;J++)if((i=u.$oN(J)).$f1>1){for(var h=new $.LH.$c1("GN"),v=0;v<i.$f1;v++)h.$m2($.PF.$m8(i.$oN(v).$er)),h.$m2("/");r.$m(h.toString()),f.$f1.$m(i)}}for(var c=0;c<f.$f1.$lN;c++){var T=new $.C.JJB(0,0,0,0),m=n.$gMJ(),i=f.$f1.$oN(c);f.$f11.$m6(m);for(var w=0;w<i.$f1;w++){var p=i.$oN(w);f.$f15.$Hg(p,r.$oN(c)),f.$f9.$Hg(p,t),f.$f8.$Hg(p,T)}f.$f8.$Hg(m,T),f.$f6.$KP(m,!0),f.$f2.$Hg(m,r.$oN(c))}n.$oqJ($.O.$p4,f.$f2),n.$oqJ($.O.$p36,f.$f15),n.$oqJ($.O.$p3,f.$f6),n.$oqJ($.O.$p70,f.$f8),n.$oqJ($.O.$p26,f.$f9)}(f,n,t);for(var e=n.$faJ($.O.$p1),i=n.$sOJ();i.$kU;i.$TZ()){var s=i.$wV;if(1===n.$faJ($.O.$p56).$ea(s)){for(var u=null,J=s.$fcJ(null);J.$kU;J.$TZ()){var h=J.$vV.$f3;if(null===u&&(u=h),n.$ssJ(J.$vV,new $.C.SJB.$t(0,n.$m38(J.$vV.$f2).$TW/2)),n.$usJ(J.$vV,new $.C.SJB.$t(0,-n.$m38(J.$vV.$f3).$TW/2)),f.$f3.$Hg(J.$vV,$.T.ADD.$t(2,!0)),f.$f4.$Hg(J.$vV,$.T.ADD.$t(1,!0)),null!==f.$f&&u!==h){var v=null===e?u:e.$ea(u),c=null===e?h:e.$ea(h);(4===f.$f20||3===f.$f20)!==(2===r.$ea(h))?f.$f.$Aj(v,c):f.$f.$Dj(v,c)}}for(var T=new $.LE,m="CG"+s.$er,w=s.$fcJ(null);w.$kU;w.$TZ()){var p=w.$vV;f.$f16.$Hg(p,m);var g=f.$f15.$ea(p.$f3);null!==g&&-1!==T.indexOf(g)||(f.$f17.$Hg(p,m),null!==g&&T.$m(g))}}}n.$oqJ($.O.$p120,f.$f16),n.$oqJ($.O.$p121,f.$f17),n.$oqJ($.O.$p181,f.$f3),n.$oqJ($.O.$p182,f.$f4)}function a(f,n,t){if(1!==n.$f2.$faJ($.O.$p56).$ea(n))throw $.NG.$m30(g[5]);if(!f.$f5[n.$er]){t.$m6(n),f.$f5[n.$er]=!0;for(var r=0,e=n.$TPJ();e.$kU;e.$TZ())if(l(f,e.$wV,t),++r>2)throw $.NG.$m30(g[6])}}function l(f,n,t){if(1===n.$f2.$faJ($.O.$p56).$ea(n))throw $.NG.$m30(g[7]);if(!f.$f5[n.$er]){t.$m6(n),f.$f5[n.$er]=!0;for(var r=n.$JPJ();r.$kU;r.$TZ())a(f,r.$wV,t)}}function o(f,n,t){var r=-1,e=-1;for(r=0;r<n.$f1;r++){var i=n.$oN(r);if(1===i.$f2.$faJ($.O.$p56).$ea(i)){for(var a=i.$JPJ();a.$kU&&!((e=n.indexOf(a.$wV))>-1);a.$TZ());if(e>-1)break}}if(-1!==e){var l=new $.C.RKB.$s,J=n.$oN(r),h=n.$oN(e),v=new $.C.RKB.$s;n.$fT(h),l.$m6(h);for(a=h.$JPJ();a.$kU;a.$TZ()){var c=a.$wV;n.$fT(c),l.$m6(c);for(var T=c.$TPJ();T.$kU;T.$TZ()){var m=T.$wV;m!==h&&(s(f,c,m,J,h)?u(f,c,n,l):v.$m6(c))}}if(n.$fLI()){n.$nRJ(l),v.$bT(),n.$fT(h),l.$m6(h);for(a=h.$JPJ();a.$kU;a.$TZ()){c=a.$wV;n.$fT(c),l.$m6(c),v.$m6(c)}}for(a=v.$eKI();a.$kU;a.$TZ())for(var w=a.$wV.$iaJ(null);w.$kU;w.$TZ())if(w.$vV.$f2!==h){var p=h.$f2;p.$ssJ(w.$vV,new $.C.SJB.$t(0,0)),p.$usJ(w.$vV,new $.C.SJB.$t(0,0)),f.$f3.$Hg(w.$vV,$.T.ADD.$t(0,!0)),f.$f4.$Hg(w.$vV,$.T.ADD.$t(0,!0)),f.$f19.$m(w.$vV)}o(f,n,t),o(f,l,t),t.$m(l)}}function s(f,n,t,r,e){return function f(n,t,r,e,i,a){if(!$.QE.$m9(a,new $.T.ZED.T(t,r)))return!0;var l=!0;for(var o=r.$JPJ();o.$kU;o.$TZ()){var s=o.$wV;if(s!==t){if(s===e)return!1;for(var u=s.$TPJ();u.$kU;u.$TZ()){var J=u.$wV;if(J!==r&&!f(n,s,J,e,i,a)){l=!1;break}}}}return l}(f,n,t,r,e,new $.SE)}function u($,f,n,t){for(var r=f.$TPJ();r.$kU;r.$TZ()){var e=r.$wV;if(!(n.indexOf(e)<0)){n.$fT(e),t.$m6(e);for(var i=e.$JPJ();i.$kU;i.$TZ()){var a=i.$wV;n.indexOf(a)>-1&&(n.$fT(a),t.$m6(a),u($,a,n,t))}}}}function J($,f,n,t){for(var r=1,e=f.$TPJ();e.$kU;e.$TZ()){var i=e.$wV;if(i!==n&&-1===t.indexOf(i)){t.$m6(i);for(var a=i.$JPJ();a.$kU;a.$TZ()){var l=a.$wV;l!==f&&(r+=J($,l,i,t))}}}return r}var h=f.lang.ClassDefinition,v=(f.lang.InterfaceDefinition,f.lang.AttributeDefinition,f.lang.EnumDefinition),c=(f.lang.StructDefinition,f.lang.Abstract,f.lang.module),T=(f.lang.delegate,f.lang.Boolean,f.lang.Number,f.lang.Void,f.lang.Object),m=(f.lang.String,f.lang.decorators.Type),w=f.lang.decorators.SetterArg,p=f.lang.decorators.OptionArgs;f.lang.addMappings("yFiles-for-HTML-Complete-2.6.0.3-Evaluation (Build 4c1a55da59b6-04/12/2024)",{get _$_mzd(){return["alignment","$bJ",m("yfiles._R.C.BFD",5)]},_$_nzd:["topLayout","$cJ"],_$_pvf:["partnerlessBelow","$YkI"],_$_asg:["offsetForFamilyNodes","$NwI"],_$_lbh:["familyNodesAlwaysBelow","$HBI"],get _$_fmh(){return["familyMembersSortingPolicy","$jGI",m("yfiles._R.C.CFD",5)]},_$_inh:["spacingBetweenFamilyMembers","$PHI"],get _$_wpo(){return["FamilyTreeLayout","ZED",p(w("topLayout"),w("spacingBetweenFamilyMembers"),w("offsetForFamilyNodes"),w("partnerlessBelow"),w("familyNodesAlwaysBelow"),w("alignment","yfiles._R.C.BFD"),w("parallelEdgeRouterEnabled"),w("selfLoopRouterEnabled"),w("familyMembersSortingPolicy","yfiles._R.C.CFD"),w("labeling"),w("selfLoopRouter"),w("parallelEdgeRouter"),w("componentLayout"),w("subgraphLayout"),w("hideGroupsStage"),w("orientationLayout"),w("orientationLayoutEnabled"),w("layoutOrientation","yfiles._R.C.FZC"),w("labelingEnabled"),w("hideGroupsStageEnabled"),w("componentLayoutEnabled"),w("subgraphLayoutEnabled"))]},_$_xpo:["FamilyType","AFD"],_$_ypo:["VerticalNodeAlignment","BFD"],_$_zpo:["FamilyMembersSortingPolicy","CFD"],_$$_zcb:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var g=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTreeLayout","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];c("_$$_zcb",function($){$._$_zpo=new v(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})}),c("_$$_zcb",function(n){n._$_wpo=new h(function(){return{$extends:$.C.TBD,constructor:function(){$.C.TBD.call(this),this.$f=null,this.$aBI=!1,this.$inI.$pNI=12,this.$f12=r(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f19:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f21:null,$f22:null,$f12:null,$f24:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_nzd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?r(this):$}},"$m1!":function(){if(!this.$f24||0!==this.$f20)return!1;var f=this.$cJ;return $.C.XAD.isInstance(f)&&(f=f.$NX),f instanceof $.C.GGD},_$_inh:{get:function(){return this.$f13},set:function(f){if(f<0)throw $.NG.$m2();this.$f13=f}},_$_asg:{get:function(){return this.$f14},set:function(f){if(f<0)throw $.NG.$m2();this.$f14=f}},_$_pvf:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_lbh:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_mzd:{get:function(){return this.$f7},set:function(f){var n=0;switch(f){case 1:n=1;break;case 0:n=.5;break;case-1:n=0;break;default:throw $.NG.$m18(g[0])}null!==this.$f12&&this.$f12 instanceof $.C.GGD&&(this.$f12.$dwI.$adI=n),this.$f7=f}},$xGI:{set:function($){this.$f49=$}},$DzI:{set:function($){this.$f32=$}},$f20:0,$f:null,_$_fmh:{get:function(){return this.$f20},set:function(f){switch(f){case 0:case 1:case 2:case 3:case 4:this.$f20=f;break;default:throw $.NG.$m2()}}},$ZcJ:function(f){if(null===f.$faJ($.O.$p56))throw $.NG.$m28(g[1]+$.O.$p56+g[2]);var n=new $.C.JLB(f),t=f.$faJ($.O.$p3),r=f.$faJ($.O.$p36),e=f.$faJ($.O.$p4),a=f.$faJ($.O.$p70),l=new $.C.JLB(f),o=null,s=$.T.KLB.$E(),u=$.T.KLB.$E(),J=$.T.KLB.$E(),h=$.T.KLB.$E(),v=$.T.KLB.$C(),c=null;if(function(f,n){f.$f21=$.T.KLB.$E();var t=n.$faJ($.O.$p56);if(null!==t)for(var r=n.$sOJ();r.$kU;r.$TZ()){var e=r.$wV;1===t.$ea(e)&&f.$f21.$Ng(e,e.$f7)}}(this,f),function(f,n){f.$f22=$.T.KLB.$E();var t=n.$faJ($.O.$p56);if(null!==t)for(var r=n.$sOJ();r.$kU;r.$TZ()){var e=r.$wV;1===t.$ea(e)&&f.$f22.$Ng(e,e.$f6)}}(this,f),null!==t){o=f.$pNJ();for(var m=!1,w=f.$rNJ();w.$kU;w.$TZ()){var p=w.$vV;t.$DP(p.$f2)!==t.$DP(p.$f3)?(o.$KP(p,!0),l.$MRJ(p),m=!0):o.$KP(p,!1)}m||(f.$XZJ(o),o=null);for(var N=f.$sOJ();N.$kU;N.$TZ()){var O=N.$wV;t.$DP(O)&&(v.$Hg(e.$ea(O),O),n.$ORJ(O),s.$KP(O,!0),u.$Hg(O,r.$ea(O)),J.$Hg(O,e.$ea(O)),h.$Hg(O,a.$ea(O)))}null!==t&&f.$HfJ($.O.$p3),null!==r&&f.$HfJ($.O.$p36),null!==e&&f.$HfJ($.O.$p4),null!==a&&f.$HfJ($.O.$p70)}var _=new $.T.ZED.T1(this);if(i(this,f,_),null!==t){var d=new $.C.NLB(f);for(N=f.$sOJ();N.$kU;N.$TZ()){O=N.$wV;if(d.$IXJ(O)){var C=new $.LE;s.$KP(O,!1);for(var B=d.$GXJ(O).$m4();B.$p;){var V=B.$m(),Z=r.$ea(V);if(null!==Z){for(var k=0;k<C.$lN;k++)if(Z===r.$ea(C.$oN(k))){Z=null;break}null!==Z&&C.$m(V)}}if(0===C.$lN){V=d.$GXJ(O).$LMJ();u.$Hg(O,r.$ea(V)),J.$Hg(O,e.$ea(V))}else if(u.$Hg(O,r.$ea(C.$oN(0))),J.$Hg(O,e.$ea(C.$oN(0))),C.$lN>1){for(var D=0;D<C.$lN;D++)for(var y=v.$ea(r.$ea(C.$oN(D))),b=0;b<C.$lN;b++){var E=v.$ea(r.$ea(C.$oN(b)));T.equals(e.$ea(E),r.$ea(y))&&C.$m3(b)}if(u.$Hg(O,r.$ea(C.$oN(0))),J.$Hg(O,e.$ea(C.$oN(0))),1===C.$lN);else{null===c&&(c=new $.C.RKB.$s);var H=f.$gMJ();c.$m6(H),s.$KP(H,!0),J.$Hg(H,H);for(k=1;k<C.$lN;k++)for(var L=C.$oN(0),U=!1;null!==L;){for(var I=v.$ea(r.$ea(L)),P=C.$oN(k);null!==P;){var R=v.$ea(r.$ea(P));if(R===I){if(C.$oN(0)!==L)for(var K=0;K<k;K++)C.$rN(K,L);C.$rN(k,P),U=!0;break}P=R}if(U)break;for(K=0;K<k;K++)C.$rN(K,L);L=I}for(k=0;k<C.$lN;k++)u.$Hg(C.$oN(k),H);u.$Hg(H,r.$ea(C.$oN(0))),n.$ORJ(H)}}}else s.$KP(O,!1),u.$Hg(O,r.$ea(O)),J.$Hg(O,e.$ea(O))}d.$rLI()}var x=new $.T.ZED.T2(this,this.$cJ),F=new $.T.ZED.T4(n,t,s,u,J,h,x),M=new $.C.QBD;M.$NX=F;var A=new $.C.KAD(M,null);A.$UdI=this.$m1();try{new $.T.ZED.T3(this,A,_,x).$cb(f)}finally{!function(f,n){null!==f.$f16&&(n.$HfJ($.O.$p120),n.$XZJ(f.$f16),f.$f16=null),null!==f.$f17&&(n.$HfJ($.O.$p121),n.$XZJ(f.$f17),f.$f17=null),null!==f.$f3&&(n.$HfJ($.O.$p181),n.$XZJ(f.$f3),f.$f3=null),null!==f.$f4&&(n.$HfJ($.O.$p182),n.$XZJ(f.$f4),f.$f4=null),null!==f.$f8&&(n.$HfJ($.O.$p70),n.$YZJ(f.$f8),f.$f8=null),null!==f.$f9&&(n.$HfJ($.O.$p26),n.$YZJ(f.$f9),f.$f9=null),null!==f.$f2&&(n.$HfJ($.O.$p4),n.$YZJ(f.$f2),f.$f2=null),null!==f.$f15&&(n.$HfJ($.O.$p36),n.$YZJ(f.$f15),f.$f15=null),null!==f.$f6&&(n.$HfJ($.O.$p3),n.$YZJ(f.$f6),f.$f6=null),null!==f.$f&&(f.$f.$rZ(),f.$f=null),f.$f19=null}(this,f),null!==t&&f.$oqJ($.O.$p3,t),null!==r&&f.$oqJ($.O.$p36,r),null!==e&&f.$oqJ($.O.$p4,e),null!==a&&f.$oqJ($.O.$p70,a)}if(n.$PMJ(),null!==c){for(k=0;k<c.$f1;k++)f.$vVJ(c.$oN(k));c=null}if(l.$PMJ(),null!==this.$f1)for(k=0;k<this.$f1.$lN;k++)f.$vVJ(this.$f11.$oN(k));if(null!==o){f.$oqJ($.O.$p102,o);var X=new $.C.GLD;X.$XrI=$.O.$p102;try{X.$cb(f)}finally{f.$HfJ($.O.$p102),f.$XZJ(o)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new h(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n){$.C.RBD.call(this,n),this.$f=f,this.$f1=$.T.KLB.$D()},$f1:null,"$m!":function($){return this.$f1.$ea($)},"$cb!":function($){if(this.$NX.$cb($),this.$f.$m1())for(var f=$.$sOJ();f.$kU;f.$TZ())for(var n=f.$wV.$iaJ(null);n.$kU;n.$TZ()){var t=n.$vV;this.$f1.$Hg(t,$.$AfJ(t))}},$f:null}}),T3:new h(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n,t,r){$.C.RBD.call(this,n),this.$f=f,this.$f2=t,this.$f1=r},$f2:null,$f1:null,"$cb!":function(f){if(this.$f.$m1()){var n=new $.C.NLB(f),t=$.T.KLB.$E();!function(f,n,t,r){for(var i=t.$faJ($.O.$p56),a=f.$f.$f11.$eKI();a.$kU;a.$TZ()){var l=a.$wV,o=n.$GXJ(l);if(e(0,o,i)){r.$KP(l,!0);for(var s=o.$eKI();s.$kU;s.$TZ()){var u=s.$wV;if(1!==i.$ea(u))for(var J=u.$iaJ(null);J.$kU;J.$TZ())f.$f.$f4.$Hg(J.$vV,null)}}}}(this,n,f,t),this.$NX.$cb(f),function(f,n,t,r,e){for(var i=n.$faJ($.O.$p56),a=f.$f.$f11.$eKI();a.$kU;a.$TZ()){var l=a.$wV;if(r.$DP(l)){for(var o=t.$GXJ(l),s=null,u=null,J=o.$eKI();J.$kU;J.$TZ()){var h=J.$wV;1!==i.$ea(h)&&h.$f6>0&&(null===s?s=h:u=h)}if(null!==s&&null!==u){var v=n.$XVJ(s),c=n.$XVJ(u),T=e.$m(s.$f11).$f,m=e.$m(u.$f11).$f;if(v>c&&T<m||v<c&&T>m){var w=n.$YaJ(l);for(J=o.$eKI();J.$kU;J.$TZ()){h=J.$wV;var p=w.$f+w.$f3-(n.$XVJ(h)-w.$f);n.$CuJ(h,p,n.$YVJ(h))}}}}}}(this,f,n,t,this.$f1),function(f,n,t,r){for(var e=n.$faJ($.O.$p56),i=f.$f.$f11.$eKI();i.$kU;i.$TZ()){var a=i.$wV;if(r.$DP(a))for(var l=t.$GXJ(a).$eKI();l.$kU;l.$TZ()){var o=l.$wV;if(1!==e.$ea(o))for(var s=o.$iaJ(null);s.$kU;s.$TZ()){var u=s.$vV;n.$usJ(u,new $.C.SJB.$t(0,-n.$m38(o).$TW/2)),f.$f.$f4.$Hg(u,$.T.ADD.$t(1,!0))}}}}(this,f,n,t),f.$oqJ($.O.$p70,this.$f.$f8);var r=this.$f1.$NX;r.$cNI=0,this.$f2.$f1=!0,this.$NX.$cb(f),r.$cNI=1,this.$f2.$f1=!1,f.$HfJ($.O.$p163),n.$rLI()}else this.$NX.$cb(f)},$f:null}}),T4:new h(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n,t,r,e,i,a){$.C.RBD.call(this,a),this.$f=f,this.$f1=n,this.$f2=t,this.$f5=r,this.$f4=e,this.$f3=i},"$cb!":function(f){var n=new $.C.RKB.$t(this.$f.$OPJ());this.$f.$PMJ(),null!==this.$f1&&(f.$oqJ($.O.$p3,this.$f2),f.$oqJ($.O.$p36,this.$f5),f.$oqJ($.O.$p4,this.$f4),f.$oqJ($.O.$p70,this.$f3)),this.$dLJ(f),this.$f.$PRJ(n),f.$HfJ($.O.$p3),f.$HfJ($.O.$p36),f.$HfJ($.O.$p4),f.$HfJ($.O.$p70)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new h(function(){return{$final:!0,constructor:function($,f){this.$f1=$,this.$f=f},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||f.lang.getType(this)!==f.lang.getType($))return!1;var n=$;return this.$f===n.$f&&this.$f1===n.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new h(function(){return{$final:!0,$with:[$.C.VAD],constructor:function(f){this.$f=f,this.$f1=!1,this.$f3=$.T.KLB.$E(),this.$f2=new $.T.ZED.T1.T(this,this.$f3,this.$f.$f21)},$f1:!1,$f2:null,$f3:null,"$cb!":function(f){if(1!==f.$eG){if(2===f.$eG&&this.$f.$f10&&this.$f.$f22.$ka(f.$dG)<2&&this.$f.$f22.$ka(f.$sD)<2){for(var n=null,t=null,r=f.$sOJ();r.$kU;r.$TZ()){var e=r.$wV;1!==f.$faJ($.O.$p56).$ea(e)?n=e:t=e}if(null!==n&&null!==t){var i=f.$m38(n),a=f.$m38(t);i.$Th(-i.$xW/2,0),a.$Th(-a.$xW/2,i.$TW+this.$f.$f14);for(var l=t.$iaJ(null);l.$kU;l.$TZ()){var o=l.$vV;($$=f.$m37(o)).$Fa(),$$.$gX=new $.C.SJB.$t(0,0),$$.$hX=new $.C.SJB.$t(0,0)}var s=this.$f.$f8.$ea(n),u=new $.C.JJB(s.top,s.left,-this.$f.$f14-f.$m38(t).$TW,s.right);return void this.$f.$f8.$Hg(n,u)}}var h=new $.C.RKB.$s;if(this.$f1)h.$mRJ(f.$sOJ()),h.$QRJ(new $.T.ZED.T1.T1(this,f));else{var v=new $.C.RKB.$s,c=new $.C.RKB.$s;for(r=f.$sOJ();r.$kU;r.$TZ()){e=r.$wV;1!==f.$faJ($.O.$p56).$ea(e)?v.$m6(e):c.$m6(e)}for(var T=null,m=0,w=0;w<v.$f1;w++){(S=v.$oN(w)).$JPJ().$uV>m&&(m=S.$JPJ().$uV,T=S)}v.$fT(T),h.$m6(T),function f(n,t,r,e,i){for(var a=new $.C.RKB.$s,l=i.$JPJ();l.$kU;l.$TZ()){var o=l.$wV;if(r.$fT(o)){var s=J(n,o,i,new $.C.RKB.$u(i));n.$f3.$Ng(o,s),a.$m6(o)}}a.$QRJ(n.$f2);var u=i.$f2.$faJ($.O.$p56),h=!1;if(1===a.$f1&&e.indexOf(i)===e.$f1-1&&(h=!0),2===n.$f.$f20||4===n.$f.$f20)for(var v=0;v<a.$f1;v++)4===n.$f.$f20===(2===u.$ea(i))?e.$m6(a.$oN(v)):e.$jT(0,a.$oN(v));else if(0!==n.$f.$f20&&1===e.$f1&&1===a.$f1)3===n.$f.$f20===(2===u.$ea(i))?e.$m6(a.$oN(0)):e.$jT(0,a.$oN(0));else{var c=e.indexOf(i),T=e.indexOf(i)+1;for(v=0;v<a.$f1;v++)v%2!==0||h?e.$jT(T,a.$oN(v)):e.$jT(c,a.$oN(v)),T++}var m=new $.C.RKB.$s;for(v=0;v<a.$f1;v++){for(var w=!1,p=null,g=(o=a.$oN(v)).$TPJ();g.$kU;g.$TZ())if((p=g.$wV)!==i){w=!0;break}if(t.$fT(p)){m.$m6(p);var N=e.indexOf(o);e.indexOf(i)>N?e.$jT(e.indexOf(o),p):e.$jT(e.indexOf(o)+1,p)}else if(w){var O=0;for(e.$fT(o),g=o.$TPJ();g.$kU;g.$TZ())O=Math.max(e.indexOf(g.$wV),O);e.$jT(O,o)}}a=null;for(v=0;v<m.$f1;v++)f(n,t,r,e,m.$oN(v))}(this,v,c,h,T)}var p=new $.C.RKB.$s,g=new $.C.RKB.$s,N=new $.LE,O=0,_=0,d=Number.MAX_VALUE;for(w=0;w<h.$f1;w++){e=h.$oN(w);var C=f.$m38(e);1===f.$faJ($.O.$p56).$ea(e)?(p.$m6(e),N.$m(w),C.$Th(O+Math.max((this.$f.$f13-C.$xW)/2,C.$xW/4),-C.$TW/2),O=O+Math.max(1.5*C.$xW,this.$f.$f13)|0):(g.$m6(e),d=Math.min(C.$TW,d),_=Math.max(C.$TW,_),C.$Th(O,-C.$TW/2),O=O+C.$xW|0)}if(0!==this.$f.$f7)for(w=0;w<g.$f1;w++){C=f.$m38(g.$oN(w));1===this.$f.$f7?C.$Th(C.$iU,-(C.$TW-d/2)):C.$Th(C.$iU,-d/2)}var B=$.HF.$m11(h.$f1),V=-2;for(w=0;w<p.$f1;w++){var Z=p.$oN(w),k=!1,D=$.ZE.$m8(N.$oN(w));if(this.$f.$f18||V===D-1&&0===B[V])k=!0;else for(var y=Z.$TPJ();y.$kU;y.$TZ()){var b=y.$wV,E=h.indexOf(b)-D;if(Math.abs(E)>2){k=!0;break}}if(k)B[D]=1;else{var H=new $.C.SJB.$t(0,0);for(l=Z.$iaJ(null);l.$kU;l.$TZ()){o=l.$vV;if(($$=f.$m37(o)).$Fa(),0===this.$f.$f7)$$.$gX=H;else{C=f.$m38(o.$f2);f.$rrJ(o,new $.C.SJB.$t(C.$iU+C.$xW/2,0))}$$.$hX=H}p.$m9(w),N.$m3(w),w--}V=D}var L,U=_/2;1===this.$f.$f7?U=d/2:-1===this.$f.$f7&&(U=_-d/2),L=U;for(w=0;w<p.$f1;w++){Z=p.$oN(w);for(var I=$.ZE.$m8(N.$oN(w)),P=0,R=Z.$TPJ();R.$kU;R.$TZ()){for(var K=h.indexOf(R.$wV),x=Math.min(I,K),F=Math.max(I,K),M=0,A=x;A<=F;A++)M+=B[A];P=Math.max(M,P)}C=f.$m38(Z);var X=U+this.$f.$f14+(C.$TW+this.$f.$f14)*(P-1);C.$Th(C.$iU,X),L=Math.max(L,X+C.$TW)}for(var G=0;G<g.$f1;G++){var S=g.$oN(G),q=h.indexOf(S),W=0,j=new $.C.VIB.$s;for(l=S.$fcJ(null);l.$kU;l.$TZ()){o=l.$vV;B[h.indexOf(o.$f3)]>0&&(j.$m6(o),W++)}if(W>0){var Y=f.$m38(S).$xW/(W+1),z=$.HF.$m11(j.$f1),Q=$.HF.$m11(j.$f1);for(w=0;w<j.$f1;w++){z[w]=h.indexOf(j.$oN(w).$f3)-q,z[w]>0&&(z[w]-=2*h.$f1),Q[w]=Y;for(A=0;A<w;A++)z[w]>z[A]?Q[A]+=Y:Q[w]+=Y}for(w=0;w<j.$f1;w++){var $$;o=j.$oN(w);($$=f.$m37(o)).$Fa(),$$.$hX=new $.C.SJB.$t(0,0);var f$=f.$m38(S),n$=f.$m38(o.$f3),t$=this.$f.$f19.$xO(o)?f$.$xW/2:Q[w],r$=n$.$jU+n$.$TW/2;$$.$gX=new $.C.SJB.$t(t$-f$.$xW/2,0),$$.$jg(f$.$iU+t$,r$)}}}var e$=(s=this.$f.$f8.$ea(g.$oN(0))).top,i$=s.bottom;null!==s&&0===this.$f.$f7?e$=L-U:null!==s&&1===this.$f.$f7&&(i$=U-L),this.$f.$f8.$Hg(g.$oN(0),new $.C.JJB(e$,s.left,i$,s.right))}},$f:null,$static:{T:new h(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f,n){this.$f1=$,this.$f=f,this.$f2=n},$f:null,$f2:null,"$kT!":function(f,n){var t=$.T.ELB.$m(this.$f.$ka(f),this.$f.$ka(n));return 0!==t?t:$.T.ELB.$m(this.$f2.$ka(f),this.$f2.$ka(n))},$f1:null}}),T1:new h(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f){this.$f1=$,this.$f=f},$f:null,"$kT!":function(f,n){return $.T.ELB.$A(this.$f.$XVJ(f),this.$f.$XVJ(n))},$f1:null}})}}}),$clinit:function(){$.T.ZED.FAMILY_TYPE_DP_KEY=$.O.$m1($.C.AFD.$class,$.C.ZED.$class,g[3],g[4])}}}})}),c("_$$_zcb",function($){$._$_xpo=new v(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),c("_$$_zcb",function($){$._$_ypo=new v(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;